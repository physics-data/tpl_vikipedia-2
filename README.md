# 维饥百渴 （Vikipedia-2）

## 问题背景

昨天在你的帮助下，芃芃成功地统计了维基百科上的页面信息。下面，就该给真的维饥百渴添加内容了！很糟糕的是，管理员 dbxoreh, seoguf 和 tfosyrreb 都放暑假去摸鱼了，只剩下芃芃一个程序员了。为了避免 996，芃芃决定写个程序从真正的维基百科上爬一些页面下来。但是爬下来以后他才意识到，页面里面有很多要改的内容。正在这时，他突然想起来，晚上要约了妹子送你们帮他画的爱心；为了不咕了这个重要的约会，芃芃又找到了机智的你……

## 问题描述

你需要实现一个 Bash 脚本 `replace.sh`，实现以下功能：

* 接受两个参数：第一个参数为一个目录 `D` 的路径，第二个参数为一个文件 `F` 的路径
* 对于 `D` 中的每一个文件（包括各级子目录中的文件），使用 `F` 中的规则进行替换

具体地，如果我们有以下的目录结构：

```text
.
├── data
│   ├── A
│   └── B
│       ├── C
│       └── D
│           ├── E
│           ├── F
│           └── G
├── replace.sh
└── rules.txt
```

那么如果在最外层目录执行 `./replace.sh data rules.txt`，则脚本会对 `data` 目录中所有文件（`A, C, E, F, G`），使用 `rules.txt` 中的规则进行替换。其中替换规则如下所示：

```text
foo/bar
pku/thu
```

每一行用 `/` 分为两部分，前面为需要被替换的文本，后面为新内容。在上面的例子中，你需要把 `A, C, E, F, G` 中的每一个 `foo` 替换成 `bar`；把每一个 `pku` 替换成 `thu`。

我们保证，所有的文件都是文本文件，并且不以 `.` 开头。所有的替换规则都是简单的，不存在特殊字符（如正则表达式中的控制字符），不需要特殊处理。

本题不限制使用的语言，我们鼓励你使用新学习的 Bash 脚本和命令行工具来完成这一工作。但在评测时，**只会调用 `replace.sh`**；因此如果你使用别的方法实现，请保证这一调用方式可以工作。

## 评分

这次依旧不提供样例，你可以自行构造数据进行测试（如使用昨天的 `html.lst` ）。

最终分数构成为：

* 黑盒 80 分：我们将会构造 8 个测例，每个 10 分。
* 白盒 20 分：代码风格与 Git 使用各 10 分（包括恰当注释、合理命名、提交日志等）

助教以 deadline 前 GitHub 上最后一次提交为准进行评测。

## 提示

1. 你应当使用（至少两层） `for` 循环来实现要求的功能，并且可能需要用到函数的递归
2. `[` 的 `-d` 选项可以判断某个路径是否为目录
3. 可以使用 `sed` 来进行文件替换，调试时可以不直接写入文件，以免错误的逻辑损坏内容
